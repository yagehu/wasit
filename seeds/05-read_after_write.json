{
    "mount_base_dir": true,
    "actions": [
        {
            "call": {
                "func": "path_open",
                "params": [
                    { "resource": 0 },
                    {
                        "value": {
                            "flags": [
                                { "name": "symlink_follow", "value": false }
                            ]
                        }
                    },
                    { "value": { "string": { "utf8": "a" } } },
                    {
                        "value": {
                            "flags": [
                                { "name": "creat",     "value": true },
                                { "name": "directory", "value": false },
                                { "name": "excl",      "value": true },
                                { "name": "trunc",     "value": false }
                            ]
                        }
                    },
                    {
                        "value": {
                            "flags": [
                                { "name": "fd_datasync",             "value": true },
                                { "name": "fd_read",                 "value": true },
                                { "name": "fd_seek",                 "value": true },
                                { "name": "fd_fdstat_set_flags",     "value": true },
                                { "name": "fd_sync",                 "value": true },
                                { "name": "fd_tell",                 "value": true },
                                { "name": "fd_write",                "value": true },
                                { "name": "fd_advise",               "value": true },
                                { "name": "fd_allocate",             "value": true },
                                { "name": "path_create_directory",   "value": true },
                                { "name": "path_create_file",        "value": true },
                                { "name": "path_link_source",        "value": true },
                                { "name": "path_link_target",        "value": true },
                                { "name": "path_open",               "value": true },
                                { "name": "fd_readdir",              "value": true },
                                { "name": "path_readlink",           "value": true },
                                { "name": "path_rename_source",      "value": true },
                                { "name": "path_rename_target",      "value": true },
                                { "name": "path_filestat_get",       "value": true },
                                { "name": "path_filestat_set_size",  "value": true },
                                { "name": "path_filestat_set_times", "value": true },
                                { "name": "fd_filestat_get",         "value": true },
                                { "name": "fd_filestat_set_size",    "value": true },
                                { "name": "fd_filestat_set_times",   "value": true },
                                { "name": "path_symlink",            "value": true },
                                { "name": "path_remove_directory",   "value": true },
                                { "name": "path_unlink_file",        "value": true },
                                { "name": "poll_fd_readwrite",       "value": true },
                                { "name": "sock_shutdown",           "value": false },
                                { "name": "sock_accept",             "value": false }
                            ]
                        }
                    },
                    {
                        "value": {
                            "flags": [
                                { "name": "fd_datasync",             "value": true },
                                { "name": "fd_read",                 "value": true },
                                { "name": "fd_seek",                 "value": true },
                                { "name": "fd_fdstat_set_flags",     "value": true },
                                { "name": "fd_sync",                 "value": true },
                                { "name": "fd_tell",                 "value": true },
                                { "name": "fd_write",                "value": true },
                                { "name": "fd_advise",               "value": true },
                                { "name": "fd_allocate",             "value": true },
                                { "name": "path_create_directory",   "value": true },
                                { "name": "path_create_file",        "value": true },
                                { "name": "path_link_source",        "value": true },
                                { "name": "path_link_target",        "value": true },
                                { "name": "path_open",               "value": true },
                                { "name": "fd_readdir",              "value": true },
                                { "name": "path_readlink",           "value": true },
                                { "name": "path_rename_source",      "value": true },
                                { "name": "path_rename_target",      "value": true },
                                { "name": "path_filestat_get",       "value": true },
                                { "name": "path_filestat_set_size",  "value": true },
                                { "name": "path_filestat_set_times", "value": true },
                                { "name": "fd_filestat_get",         "value": true },
                                { "name": "fd_filestat_set_size",    "value": true },
                                { "name": "fd_filestat_set_times",   "value": true },
                                { "name": "path_symlink",            "value": true },
                                { "name": "path_remove_directory",   "value": true },
                                { "name": "path_unlink_file",        "value": true },
                                { "name": "poll_fd_readwrite",       "value": true },
                                { "name": "sock_shutdown",           "value": false },
                                { "name": "sock_accept",             "value": false }
                            ]
                        }
                    },
                    {
                        "value": {
                            "flags": [
                                { "name": "append",   "value": false },
                                { "name": "dsync",    "value": false },
                                { "name": "nonblock", "value": false },
                                { "name": "rsync",    "value": false },
                                { "name": "sync",     "value": false }
                            ]
                        }
                    }
                ],
                "results": [ { "resource": 1 } ]
            }
        },
        {
            "call": {
                "func": "fd_write",
                "params": [
                    { "resource": 1 },
                    {
                        "value": {
                            "list": [
                                {
                                    "value": {
                                        "record": [
                                            {
                                                "name": "buf",
                                                "value": {
                                                    "value": {
                                                        "const_pointer": [
                                                            { "value": { "builtin": { "u8": 97 } } }
                                                        ]
                                                    }
                                                }
                                            },
                                            {
                                                "name": "buf_len",
                                                "value": {
                                                    "value": {
                                                        "builtin": { "u32": 1 }
                                                    }
                                                }
                                            }
                                        ]
                                    }
                                }
                            ]
                        }
                    }
                ],
                "results": [
                    { "resource": 2 }
                ]
            }
        },
        {
            "call": {
                "func": "fd_seek",
                "params": [
                    { "resource": 1 },
                    { "value": { "builtin": { "s64": 0 } } },
                    { "value": { "variant": { "name": "set" } } }
                ],
                "results": [ { "resource": 3 } ]
            }
        },
        {
            "call": {
                "func": "fd_read",
                "params": [
                    { "resource": 1 },
                    {
                        "value": {
                            "list": [
                                {
                                    "value": {
                                        "record": [
                                            {
                                                "name": "buf",
                                                "value": { "value": { "pointer": { "alloc_from_resource": 2 } } }
                                            },
                                            {
                                                "name": "buf_len",
                                                "value": { "resource": 2 }
                                            }
                                        ]
                                    }
                                }
                            ]
                        }
                    }
                ],
                "results": [
                    { "resource": 4 }
                ]
            }
        }
    ]
}


